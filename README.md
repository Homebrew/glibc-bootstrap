# glibc-bootstrap

Homebrew bottles on Linux must be linked to a version of `glibc` than the equivalent or newer than the version used when they were compiled in CI.  If the host `glibc` is too old, we install Homebrew's `glibc` first so that all bottles will use the Homebrew version of `glibc` instead of the host `glibc`.

The `glibc` bottle is not relocatable and must be built from source if the user is in a non-default prefix.  While `glibc` has no runtime dependencies, it does have build dependencies which may be too new or unavailable to users without root access.  Rather than requiring the user to build these dependencies from source, we build them with GitHub Actions in this repository using a Linux image with an older version of `glibc` and a prefix of `/tmp/homebrew`.  Assuming the user has write access to `/tmp`, this approach guarantees that all users on actively maintained versions of `glibc` (2.17 or newer) can install and run these binaries. The build dependency binaries are installed as resources to `/tmp/homebrew` and used to build `glibc` instead of the host toolchain.
